<script>
<!--
document.write(unescape("%3C%21doctype%20html%3E%0A%3Chtml%20lang%3Den%3E%0A%3Chead%3E%0A%3Cmeta%20charset%3DUTF-8%3E%0A%3Cmeta%20name%3Dviewport%20content%3D%22width%3Ddevice-width%2Cinitial-scale%3D1%2Cmaximum-scale%3D1%2Cuser-scalable%3Dno%22%3E%0A%3Ctitle%3ELucky%20Staff%20Portal%3C/title%3E%0A%3Clink%20href%3Dhttps%3A//cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css%20rel%3Dstylesheet%3E%0A%3Clink%20href%3Dhttps%3A//cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css%20rel%3Dstylesheet%3E%0A%3Cscript%20src%3Dhttps%3A//cdn.jsdelivr.net/npm/sweetalert2@11%3E%3C/script%3E%0A%3Cstyle%3E%3Aroot%7B--primary%3A%232563eb%3B--dark%3A%230f172a%3B--success%3A%2322c55e%3B--warning%3A%23eab308%3B--danger%3A%23ef4444%7Dbody%7Bbackground-color%3A%23f1f5f9%3Bfont-family%3A%27Segoe%20UI%27%2Csans-serif%3Bheight%3A100vh%3Boverflow%3Ahidden%7D%23login-screen%7Bposition%3Afixed%3Btop%3A0%3Bleft%3A0%3Bwidth%3A100%25%3Bheight%3A100%25%3Bbackground%3Alinear-gradient%28135deg%2C%231e293b%200%2C%230f172a%20100%25%29%3Bdisplay%3Aflex%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3Bz-index%3A9999%7D.login-card%7Bbackground%3Argba%28255%2C255%2C255%2C.1%29%3Bbackdrop-filter%3Ablur%2810px%29%3Bpadding%3A30px%3Bborder-radius%3A20px%3Bborder%3A1px%20solid%20rgba%28255%2C255%2C255%2C.1%29%3Bwidth%3A85%25%3Bmax-width%3A350px%3Bcolor%3A%23fff%3Bbox-shadow%3A0%2010px%2030px%20rgba%280%2C0%2C0%2C.5%29%7D.login-input%7Bbackground%3Argba%280%2C0%2C0%2C.3%29%3Bborder%3Anone%3Bcolor%3A%23fff%3Bpadding%3A12px%3Bborder-radius%3A10px%3Bmargin-bottom%3A15px%3Bwidth%3A100%25%3Btext-align%3Acenter%7D.login-input%3Afocus%7Boutline%3A1px%20solid%20var%28--primary%29%3Bbackground%3Argba%280%2C0%2C0%2C.5%29%3Bcolor%3A%23fff%7D.btn-login%7Bbackground%3Avar%28--primary%29%3Bborder%3Anone%3Bpadding%3A12px%3Bwidth%3A100%25%3Bborder-radius%3A10px%3Bfont-weight%3A700%3Bcolor%3A%23fff%3Bmargin-top%3A10px%7D%23app-screen%7Bdisplay%3Anone%3Bheight%3A100%25%3Bflex-direction%3Acolumn%7D.app-header%7Bbackground%3Avar%28--dark%29%3Bcolor%3A%23fff%3Bpadding%3A15px%2020px%3Bborder-bottom-left-radius%3A25px%3Bborder-bottom-right-radius%3A25px%3Bflex-shrink%3A0%3Bposition%3Arelative%7D.status-dot%7Bheight%3A12px%3Bwidth%3A12px%3Bbackground-color%3Avar%28--warning%29%3Bborder-radius%3A50%25%3Bdisplay%3Ainline-block%3Bmargin-left%3A8px%3Bbox-shadow%3A0%200%205px%20var%28--warning%29%3Btransition%3A.3s%7D.status-online%7Bbackground-color%3Avar%28--success%29%3Bbox-shadow%3A0%200%208px%20var%28--success%29%7D.status-offline%7Bbackground-color%3Avar%28--danger%29%3Bbox-shadow%3A0%200%208px%20var%28--danger%29%7D.search-box%7Bbackground%3A%23fff%3Bborder-radius%3A25px%3Bpadding%3A10px%2020px%3Bmargin-top%3A15px%3Bdisplay%3Aflex%3Balign-items%3Acenter%3Bbox-shadow%3A0%204px%2010px%20rgba%280%2C0%2C0%2C.1%29%7D.search-box%20input%7Bborder%3Anone%3Boutline%3A0%3Bwidth%3A100%25%3Bmargin-left%3A10px%7D.content-area%7Bflex-grow%3A1%3Boverflow-y%3Aauto%3Bpadding%3A20px%3Bpadding-bottom%3A80px%7D.stock-card%7Bbackground%3A%23fff%3Bborder-radius%3A16px%3Bpadding%3A15px%3Bmargin-bottom%3A15px%3Bbox-shadow%3A0%202px%205px%20rgba%280%2C0%2C0%2C.05%29%3Bborder%3A1px%20solid%20%23e2e8f0%3Bopacity%3A0%3Btransform%3AtranslateY%2820px%29%3Btransition%3A.4s%20ease-out%7D.stock-card.visible%7Bopacity%3A1%3Btransform%3AtranslateY%280%29%7D.shop-badge%7Bfont-size%3A.75rem%3Bpadding%3A4px%208px%3Bborder-radius%3A6px%3Bfont-weight%3A600%3Btext-transform%3Auppercase%7D.bg-shop1%7Bbackground%3A%23dbeafe%3Bcolor%3A%231e40af%7D.bg-shop2%7Bbackground%3A%23fce7f3%3Bcolor%3A%239d174d%7D.bg-shop3%7Bbackground%3A%23d1fae5%3Bcolor%3A%23065f46%7D.action-btns%7Bdisplay%3Aflex%3Bgap%3A8px%3Bmargin-top%3A12px%7D.btn-act%7Bflex%3A1%3Bpadding%3A8px%3Bborder-radius%3A8px%3Bborder%3Anone%3Bfont-size%3A.9rem%3Bfont-weight%3A600%7D.btn-transfer%7Bbackground%3A%23fff7ed%3Bcolor%3A%23c2410c%3Bborder%3A1px%20solid%20%23ffedd5%7D.btn-sell%7Bbackground%3A%23f0fdf4%3Bcolor%3A%2315803d%3Bborder%3A1px%20solid%20%23dcfce7%7D.skeleton%7Bheight%3A100px%3Bbackground%3A%23e2e8f0%3Bborder-radius%3A16px%3Bmargin-bottom%3A15px%3Banimation%3Apulse%201.5s%20infinite%7D@keyframes%20pulse%7B0%25%7Bopacity%3A.6%7D50%25%7Bopacity%3A1%7D100%25%7Bopacity%3A.6%7D%7D%3C/style%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%3Cdiv%20id%3Dlogin-screen%3E%0A%3Cdiv%20class%3D%22login-card%20text-center%22%3E%0A%3Cdiv%20class%3Dmb-3%3E%3Ci%20class%3D%22fas%20fa-mobile-alt%20fa-3x%20text-warning%22%3E%3C/i%3E%3C/div%3E%0A%3Ch4%20class%3Dfw-bold%3ELucky%20Telecom%3C/h4%3E%0A%3Cp%20class%3D%22small%20text-white-50%22%3EStaff%20Login%3C/p%3E%0A%3Cform%20id%3DloginForm%3E%0A%3Cinput%20id%3DloginId%20class%3Dlogin-input%20placeholder%3D%22Username%20%28Case%20Sensitive%29%22%20required%20autocomplete%3Doff%3E%0A%3Cinput%20type%3Dpassword%20id%3DloginPass%20class%3Dlogin-input%20placeholder%3DPassword%20required%3E%0A%3Cbutton%20type%3Dsubmit%20class%3Dbtn-login%3EENTER%20SHOP%20%3Ci%20class%3D%22fas%20fa-arrow-right%22%3E%3C/i%3E%3C/button%3E%0A%3C/form%3E%0A%3C/div%3E%0A%3C/div%3E%0A%3Cdiv%20id%3Dapp-screen%3E%0A%3Cdiv%20class%3Dapp-header%3E%0A%3Cdiv%20class%3D%22d-flex%20justify-content-between%20align-items-center%22%3E%0A%3Cdiv%3E%0A%3Ch5%20class%3D%22m-0%20fw-bold%20d-flex%20align-items-center%22%3E%0AStock%20List%20%3Cspan%20id%3DconnStatus%20class%3Dstatus-dot%20title%3D%22Live%20Status%22%3E%3C/span%3E%0A%3C/h5%3E%0A%3Csmall%20class%3Dtext-white-50%3EUser%3A%20%3Cspan%20id%3DdisplayUser%20class%3D%22text-warning%20fw-bold%22%3E%3C/span%3E%3C/small%3E%0A%3C/div%3E%0A%3Cbutton%20class%3D%22btn%20btn-sm%20btn-outline-light%20rounded-circle%22%20onclick%3Dlogout%28%29%3E%3Ci%20class%3D%22fas%20fa-sign-out-alt%22%3E%3C/i%3E%3C/button%3E%0A%3C/div%3E%0A%3Cdiv%20class%3Dsearch-box%3E%0A%3Ci%20class%3D%22fas%20fa-search%20text-secondary%22%3E%3C/i%3E%0A%3Cinput%20id%3DsearchInput%20placeholder%3D%22Search%20mobile%2C%20model...%22%20onkeyup%3DfilterStock%28%29%3E%0A%3C/div%3E%0A%3Cdiv%20class%3D%22d-flex%20gap-2%20mt-3%20overflow-auto%20no-scrollbar%22%3E%0A%3Cbutton%20class%3D%22btn%20btn-sm%20btn-light%20rounded-pill%20px-3%20active-filter%22%20onclick%3D%27filterShop%28%22all%22%2Cthis%29%27%3EAll%3C/button%3E%0A%3Cbutton%20class%3D%22btn%20btn-sm%20btn-outline-light%20rounded-pill%20px-3%22%20onclick%3D%27filterShop%28%22shop1%22%2Cthis%29%27%3EMain%3C/button%3E%0A%3Cbutton%20class%3D%22btn%20btn-sm%20btn-outline-light%20rounded-pill%20px-3%22%20onclick%3D%27filterShop%28%22shop2%22%2Cthis%29%27%3EShop%202%3C/button%3E%0A%3Cbutton%20class%3D%22btn%20btn-sm%20btn-outline-light%20rounded-pill%20px-3%22%20onclick%3D%27filterShop%28%22shop3%22%2Cthis%29%27%3EShop%203%3C/button%3E%0A%3C/div%3E%0A%3C/div%3E%0A%3Cdiv%20class%3Dcontent-area%20id%3DstockContainer%3E%0A%3Cdiv%20class%3Dskeleton%3E%3C/div%3E%3Cdiv%20class%3Dskeleton%3E%3C/div%3E%3Cdiv%20class%3Dskeleton%3E%3C/div%3E%0A%3C/div%3E%0A%3C/div%3E%0A%3Cscript%3Econst%20API_URL%3D%22https%3A//script.google.com/macros/s/AKfycbz1Z3SYTDKmp7vibEZln8daR3hqz8xJNENa8gKmJWe5nwcnA9HMdncJIeG2yqDoj8Zx/exec%22%3Blet%20GLOBAL_DATA%3D%7BInventory%3A%5B%5D%2CStaff_Users%3A%5B%5D%2CLogs%3A%5B%5D%7D%2CCURRENT_USER%3Dnull%2CSHOP_FILTER%3D%22all%22%2CLAST_FETCH_JSON%3D%22%22%2CSYNC_INTERVAL%3Dnull%3Bfunction%20loadCachedData%28%29%7Bconst%20t%3DlocalStorage.getItem%28%22lucky_cached_data%22%29%3Bif%28t%29try%7BGLOBAL_DATA%3DJSON.parse%28t%29%2Cconsole.log%28%22Loaded%20from%20Cache%20%28Offline%20Mode%29%22%29%7Dcatch%28t%29%7Bconsole.error%28%22Cache%20Error%22%2Ct%29%7D%7Dfunction%20logout%28%29%7BlocalStorage.removeItem%28%22lucky_staff_user%22%29%2CclearInterval%28SYNC_INTERVAL%29%2Clocation.reload%28%29%7Dfunction%20enterApp%28%29%7Bdocument.getElementById%28%22login-screen%22%29.style.display%3D%22none%22%2Cdocument.getElementById%28%22app-screen%22%29.style.display%3D%22flex%22%2Cdocument.getElementById%28%22displayUser%22%29.innerText%3DCURRENT_USER%2CrenderStock%28%29%2CfetchLatestData%28%210%2C%211%29%2CSYNC_INTERVAL%3DsetInterval%28%28%28%29%3D%3E%7B%22searchInput%22%21%3D%3Ddocument.activeElement.id%26%26fetchLatestData%28%210%2C%210%29%7D%29%2C5e3%29%7Dasync%20function%20fetchLatestData%28t%3D%211%2Ce%3D%211%29%7Bconst%20n%3Ddocument.getElementById%28%22connStatus%22%29%3B%21e%26%26t%26%260%3D%3D%3DGLOBAL_DATA.Inventory.length%26%26%28document.getElementById%28%22stockContainer%22%29.innerHTML%3D%27%3Cdiv%20class%3D%22skeleton%22%3E%3C/div%3E%3Cdiv%20class%3D%22skeleton%22%3E%3C/div%3E%27%29%3Btry%7Be%7C%7C%28n.className%3D%22status-dot%22%29%3Bconst%20o%3Dawait%20fetch%28API_URL%2C%7Bmethod%3A%22POST%22%2Cbody%3AJSON.stringify%28%7Baction%3A%22GET_ALL_DATA%22%7D%29%7D%29%2Cs%3Dawait%20o.json%28%29%3Bif%28%22success%22%3D%3D%3Ds.status%29%7Bn.className%3D%22status-dot%20status-online%22%3Bconst%20e%3DJSON.stringify%28s.data%29%3Be%21%3D%3DLAST_FETCH_JSON%26%26%28GLOBAL_DATA%3Ds.data%2CLAST_FETCH_JSON%3De%2ClocalStorage.setItem%28%22lucky_cached_data%22%2Ce%29%2CGLOBAL_DATA.Inventory%7C%7C%28GLOBAL_DATA.Inventory%3D%5B%5D%29%2CGLOBAL_DATA.Logs%7C%7C%28GLOBAL_DATA.Logs%3D%5B%5D%29%2Ct%26%26renderStock%28%29%29%7D%7Dcatch%28t%29%7Bconsole.error%28%22Sync%20Error%22%2Ct%29%2Cn.className%3D%22status-dot%20status-offline%22%7D%7Dfunction%20renderStock%28%29%7Bconst%20t%3Ddocument.getElementById%28%22stockContainer%22%29%2Ce%3Ddocument.getElementById%28%22searchInput%22%29.value.toLowerCase%28%29%3Bif%28%21GLOBAL_DATA.Inventory%7C%7C0%3D%3D%3DGLOBAL_DATA.Inventory.length%29return%20void%28t.innerHTML%3D%27%3Cdiv%20class%3D%22text-center%20mt-5%20text-muted%22%3ENo%20Data%20Available.%3Cbr%3EOffline%20or%20Empty.%3C/div%3E%27%29%3Bconst%20n%3DGLOBAL_DATA.Inventory.filter%28%28t%3D%3E%7Bconst%20n%3D%28t.name%3Ft.name.toString%28%29.toLowerCase%28%29%3A%22%22%29.includes%28e%29%2Co%3D%22all%22%3D%3D%3DSHOP_FILTER%7C%7Ct.shop%3D%3D%3DSHOP_FILTER%3Breturn%20n%26%26o%26%26t.qty%3E0%7D%29%29%3Bt.innerHTML%3D%22%22%2C0%21%3D%3Dn.length%3Fn.forEach%28%28%28e%2Cn%29%3D%3E%7Bconst%20o%3Ddocument.createElement%28%22div%22%29%3Bo.className%3D%22stock-card%22%2Co.style.transitionDelay%3D%28n%3C10%3F30*n%3A0%29+%22ms%22%3Blet%20s%3D%22shop1%22%3D%3D%3De.shop%3F%22bg-shop1%22%3A%22shop2%22%3D%3D%3De.shop%3F%22bg-shop2%22%3A%22bg-shop3%22%2Ca%3D%22shop1%22%3D%3D%3De.shop%3F%22Main%20Branch%22%3A%22shop2%22%3D%3D%3De.shop%3F%22Shop%202%22%3A%22Shop%203%22%3Bo.innerHTML%3D%60%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22d-flex%20justify-content-between%20align-items-start%20mb-2%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22shop-badge%20%24%7Bs%7D%22%3E%24%7Ba%7D%3C/span%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class%3D%22fw-bold%20text-dark%22%3EQty%3A%20%24%7Be.qty%7D%3C/span%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch6%20class%3D%22fw-bold%20text-dark%20mb-1%22%3E%24%7Be.name%7D%3C/h6%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22text-success%20fw-bold%20mb-3%22%3E%u20B9%24%7Be.sp%7C%7Ce.price%7C%7C0%7D%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22action-btns%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class%3D%22btn-act%20btn-transfer%22%20onclick%3D%22handleTransfer%28%24%7Be.id%7D%29%22%3E%3Ci%20class%3D%22fas%20fa-exchange-alt%22%3E%3C/i%3E%20Transfer%3C/button%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class%3D%22btn-act%20btn-sell%22%20onclick%3D%22handleSell%28%24%7Be.id%7D%29%22%3E%3Ci%20class%3D%22fas%20fa-shopping-cart%22%3E%3C/i%3E%20Sell%3C/button%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%60%2Ct.appendChild%28o%29%2CsetTimeout%28%28%28%29%3D%3Eo.classList.add%28%22visible%22%29%29%2C50%29%7D%29%29%3At.innerHTML%3D%27%3Cdiv%20class%3D%22text-center%20mt-5%20text-muted%22%3ENo%20Item%20Found%3C/div%3E%27%7Dfunction%20filterStock%28%29%7BrenderStock%28%29%7Dfunction%20filterShop%28t%2Ce%29%7BSHOP_FILTER%3Dt%2Cdocument.querySelectorAll%28%22.app-header%20button%22%29.forEach%28%28t%3D%3E%7Bt.classList.remove%28%22btn-light%22%2C%22active-filter%22%29%2Ct.classList.add%28%22btn-outline-light%22%29%7D%29%29%2Ce.classList.remove%28%22btn-outline-light%22%29%2Ce.classList.add%28%22btn-light%22%29%2CrenderStock%28%29%7Dfunction%20handleSell%28t%29%7Bconst%20e%3DGLOBAL_DATA.Inventory.find%28%28e%3D%3Ee.id%3D%3Dt%29%29%3BSwal.fire%28%7Btitle%3A%22Confirm%20Sale%22%2Ctext%3A%60Sell%201%20unit%20of%20%24%7Be.name%7D%3F%60%2Cicon%3A%22question%22%2CshowCancelButton%3A%210%2CconfirmButtonText%3A%22Yes%2C%20Sold%22%2CconfirmButtonColor%3A%22%2315803d%22%7D%29.then%28%28t%3D%3E%7Bt.isConfirmed%26%26processTransaction%28%22SELL%22%2Ce%29%7D%29%29%7Dfunction%20handleTransfer%28t%29%7Bconst%20e%3DGLOBAL_DATA.Inventory.find%28%28e%3D%3Ee.id%3D%3Dt%29%29%3BSwal.fire%28%7Btitle%3A%22Transfer%20Stock%22%2Chtml%3A%60Move%20%3Cb%3E%24%7Be.name%7D%3C/b%3E%20from%20%24%7Be.shop%7D%20to%3A%60%2Cinput%3A%22select%22%2CinputOptions%3A%7Bshop1%3A%22Main%20Branch%22%2Cshop2%3A%22Shop%202%22%2Cshop3%3A%22Shop%203%22%7D%2CshowCancelButton%3A%210%2CconfirmButtonText%3A%22Transfer%22%2CconfirmButtonColor%3A%22%23c2410c%22%7D%29.then%28%28t%3D%3E%7Bt.isConfirmed%26%26t.value%21%3D%3De.shop%3FprocessTransaction%28%22TRANSFER%22%2Ce%2Ct.value%29%3At.value%3D%3D%3De.shop%26%26Swal.fire%28%22Error%22%2C%22Cannot%20transfer%20to%20same%20shop%22%2C%22warning%22%29%7D%29%29%7Dasync%20function%20processTransaction%28t%2Ce%2Cn%3Dnull%29%7BSwal.fire%28%7Btitle%3A%22Processing...%22%2CdidOpen%3A%28%29%3D%3ESwal.showLoading%28%29%7D%29%2Cawait%20fetchLatestData%28%211%2C%211%29%3Bconst%20o%3DGLOBAL_DATA.Inventory.find%28%28t%3D%3Et.id%3D%3De.id%29%29%3Bif%28%21o%7C%7Co.qty%3C1%29return%20Swal.fire%28%22Error%22%2C%22Stock%20unavailable%20or%20changed%20recently.%22%2C%22error%22%29%3Bconst%20s%3D%28new%20Date%29.toLocaleString%28%29%2Ca%3Do.sp%7C%7Co.price%7C%7C0%3Bif%28%22SELL%22%3D%3D%3Dt%29o.qty%3DparseInt%28o.qty%29-1%2CGLOBAL_DATA.Logs.push%28%7Bdate%3As%2Cstaff%3ACURRENT_USER%2Caction%3A%22SALE%22%2Cdetails%3A%60%24%7Bo.name%7D%20sold%20from%20%24%7Bo.shop%7D%60%2Camount%3Aa%7D%29%3Belse%20if%28%22TRANSFER%22%3D%3D%3Dt%29%7Bo.qty%3DparseInt%28o.qty%29-1%3Blet%20t%3DGLOBAL_DATA.Inventory.find%28%28t%3D%3Et.name%3D%3D%3Do.name%26%26t.shop%3D%3D%3Dn%29%29%3Bif%28t%29t.qty%3DparseInt%28t.qty%29+1%3Belse%7Blet%20t%3DJSON.parse%28JSON.stringify%28o%29%29%3Bt.id%3DDate.now%28%29%2Ct.shop%3Dn%2Ct.qty%3D1%2CGLOBAL_DATA.Inventory.push%28t%29%7DGLOBAL_DATA.Logs.push%28%7Bdate%3As%2Cstaff%3ACURRENT_USER%2Caction%3A%22TRANSFER%22%2Cdetails%3A%60%24%7Bo.name%7D%3A%20%24%7Bo.shop%7D%20-%3E%20%24%7Bn%7D%60%2Camount%3A0%7D%29%7Dconst%20r%3D%7Baction%3A%22SYNC_DATA%22%2Cdata%3A%7BInventory%3AGLOBAL_DATA.Inventory%2CLogs%3AGLOBAL_DATA.Logs%7D%7D%3Btry%7Bconst%20t%3Dawait%20fetch%28API_URL%2C%7Bmethod%3A%22POST%22%2Cbody%3AJSON.stringify%28r%29%7D%29%2Ce%3Dawait%20t.json%28%29%3Bif%28%22success%22%21%3D%3De.status%29throw%20new%20Error%28e.message%29%3BSwal.fire%28%22Success%22%2C%22Transaction%20Saved%22%2C%22success%22%29%2CrenderStock%28%29%7Dcatch%28t%29%7BSwal.fire%28%22Error%22%2C%22Sync%20Failed%3A%20%22+t.message%2C%22error%22%29%7D%7Dwindow.onload%3D%28%29%3D%3E%7Bconst%20t%3DlocalStorage.getItem%28%22lucky_staff_user%22%29%3BloadCachedData%28%29%2Ct%26%26%28CURRENT_USER%3Dt%2CenterApp%28%29%29%7D%2Cdocument.getElementById%28%22loginForm%22%29.addEventListener%28%22submit%22%2C%28async%20t%3D%3E%7Bt.preventDefault%28%29%3Bconst%20e%3Ddocument.getElementById%28%22loginId%22%29.value.trim%28%29%2Cn%3Ddocument.getElementById%28%22loginPass%22%29.value.trim%28%29%2Co%3Ddocument.querySelector%28%22.btn-login%22%29%3Bo.innerHTML%3D%27%3Ci%20class%3D%22fas%20fa-spinner%20fa-spin%22%3E%3C/i%3E%20Checking...%27%3Btry%7Bawait%20fetchLatestData%28%211%2C%211%29%3Bconst%20t%3D%28GLOBAL_DATA.Staff_Users%7C%7C%5B%5D%29.find%28%28t%3D%3EString%28t.username%29.trim%28%29.toLowerCase%28%29%3D%3D%3De.toLowerCase%28%29%26%26String%28t.password%29.trim%28%29%3D%3D%3Dn%29%29%3Bt%3F%28CURRENT_USER%3Dt.username%2ClocalStorage.setItem%28%22lucky_staff_user%22%2CCURRENT_USER%29%2CenterApp%28%29%29%3ASwal.fire%28%22Login%20Failed%22%2C%22Incorrect%20Username%20or%20Password.%22%2C%22error%22%29%7Dcatch%28t%29%7BSwal.fire%28%22Network%20Error%22%2C%22Check%20internet%20connection.%22%2C%22error%22%29%7Dfinally%7Bo.innerHTML%3D%27ENTER%20SHOP%20%3Ci%20class%3D%22fas%20fa-arrow-right%22%3E%3C/i%3E%27%7D%7D%29%29%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E"));
//-->
</script>${o.shop}`,amount:a});else if("TRANSFER"===t){o.qty=parseInt(o.qty)-1;let t=GLOBAL_DATA.Inventory.find((t=>t.name===o.name&&t.shop===n));if(t)t.qty=parseInt(t.qty)+1;else{let t=JSON.parse(JSON.stringify(o));t.id=Date.now(),t.shop=n,t.qty=1,GLOBAL_DATA.Inventory.push(t)}GLOBAL_DATA.Logs.push({date:s,staff:CURRENT_USER,action:"TRANSFER",details:`${o.name}: ${o.shop} -> ${n}`,amount:0})}const r={action:"SYNC_DATA",data:{Inventory:GLOBAL_DATA.Inventory,Logs:GLOBAL_DATA.Logs}};try{const t=await fetch(API_URL,{method:"POST",body:JSON.stringify(r)}),e=await t.json();if("success"!==e.status)throw new Error(e.message);Swal.fire("Success","Transaction Saved","success"),renderStock()}catch(t){Swal.fire("Error","Sync Failed: "+t.message,"error")}}window.onload=()=>{const t=localStorage.getItem("lucky_staff_user");loadCachedData(),t&&(CURRENT_USER=t,enterApp())},document.getElementById("loginForm").addEventListener("submit",(async t=>{t.preventDefault();const e=document.getElementById("loginId").value.trim(),n=document.getElementById("loginPass").value.trim(),o=document.querySelector(".btn-login");o.innerHTML='<i class="fas fa-spinner fa-spin"></i> Checking...';try{await fetchLatestData(!1,!1);const t=(GLOBAL_DATA.Staff_Users||[]).find((t=>String(t.username).trim().toLowerCase()===e.toLowerCase()&&String(t.password).trim()===n));t?(CURRENT_USER=t.username,localStorage.setItem("lucky_staff_user",CURRENT_USER),enterApp()):Swal.fire("Login Failed","Incorrect Username or Password.","error")}catch(t){Swal.fire("Network Error","Check internet connection.","error")}finally{o.innerHTML='ENTER SHOP <i class="fas fa-arrow-right"></i>'}}))</script>
</body>
</html>
